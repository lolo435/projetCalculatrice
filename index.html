<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <!-- Définit l'encodage des caractères comme UTF-8 pour supporter les accents et caractères spéciaux -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Assure la responsivité sur tous les appareils en adaptant la largeur et l'échelle initiale -->
  <link rel="stylesheet" href="style.css">
  <title>Calculatrice</title> <!-- Titre affiché dans l'onglet du navigateur -->

</head>

<body>
  <div class="calculator"> <!-- Conteneur principal de la calculatrice -->
    <div id="display" class="display">0</div> <!-- Écran affichant le résultat, initialisé à 0 -->
    <div class="keys"> <!-- Grille des boutons -->
      <button class="clear" id="clear">C</button> <!-- Bouton de réinitialisation -->
      <button class="divide" data-op="/">÷</button> <!-- Division -->
      <button class="multiply" data-op="*">×</button> <!-- Multiplication -->
      <button class="subtract" data-op="-">−</button> <!-- Soustraction -->
      <button class="seven" data-num="7">7</button> <!-- 7 -->
      <button class="eight" data-num="8">8</button> <!-- 8 -->
      <button class="nine" data-num="9">9</button> <!-- 9 -->
      <button class="add" data-op="+">+</button> <!-- Addition -->
      <button class="four" data-num="4">4</button> <!-- 4 -->
      <button class="five" data-num="5">5</button> <!-- 5 -->
      <button class="six" data-num="6">6</button> <!-- 6 -->
      <button class="one" data-num="1">1</button> <!-- 1 -->
      <button class="two" data-num="2">2</button> <!-- 2 -->
      <button class="three" data-num="3">3</button> <!-- 3 -->
      <button class="zero" data-num="0">0</button> <!-- 0 -->
      <button class="dot" data-num=".">.</button> <!-- Point décimal -->
      <button class="equal" id="equal">=</button> <!-- Bouton égal -->
    </div>
  </div>

  <script>
    let current = "0";
    let previous = null;      // opérande 1
    let op = null;             // opérateur choisi
    let resetNext = false;     // flag de reset

    const displayEl = document.getElementById('display');

    function appendDigit(d) {
      if (current === "0" && d !== ".") {
        current = d;
      } else if (d === "." && current.includes(".")) {
        return;
      } else {
        current += d;
      }
    }

    function updateDisplay() {
      displayEl.textContent = current;
    }

    updateDisplay(); // affiche 0 au démarrage

    function compute() {
      const cur = parseFloat(current);         // convertit la chaîne actuelle
      if (op === null || previous === null) return;  // rien à faire
      let res;
      switch (op) {
        case '+': res = previous + cur; break;
        case '-': res = previous - cur; break;
        case '*': res = previous * cur; break;
        case '/':
          res = (cur === 0) ? 'Erreur' : previous / cur;
          break;
      }

      current = res.toString();   // prépare l’affichage
      op = null;                  // reset opérateur
      previous = null;            // reset opérande
      resetNext = true;           // prochain chiffre écrase
    }

    function clearAll() {
      // Remet l'affichage à "0"
      current = "0";
      // Réinitialise les opérandes et l'opérateur
      previous = null;
      op = null;
      // Désactive le flag de reset
      resetNext = false;
    }

    function chooseOp(o) {
      // Si un opérateur existait, effectue d'abord le calcul
      if (op !== null) compute();
      // Mémorise la valeur actuelle convertie en nombre
      previous = parseFloat(current);
      // Stocke l'opérateur choisi
      op = o;
      // Indique que l'affichage doit être écrasé au prochain chiffre
      resetNext = true;
    }

    function updateDisplay() {
      displayEl.textContent = current;
    }
    


    document.querySelector('button[data-op]').addEventListener('click', () => {
      chooseOp(btn.dataset.op);
    });

    document.getElementById('equal').addEventListener('click', () => {
      compute();
      updateDisplay();
    });

    document.getElementById('clear').addEventListener('click', () => {
      clearAll();
      updateDisplay();
    });

    document.querySelectorAll('button[data-num]').forEach(btn => {
      btn.addEventListener('click', () => {
        appendDigit(btn.dataset.num);
        updateDisplay();
      });
    });

    document.getElementById('inc').addEventListener('click', () => {
      count++;
      updateDisplay();
    });
    document.getElementById('dec').addEventListener('click', () => {
      count--;
      updateDisplay();
    });


  </script>
</body>

</html>